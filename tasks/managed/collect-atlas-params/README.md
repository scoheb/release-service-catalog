# collect-atlas-params

Tekton task that collects the Atlas server option from the data file. Based on
the value of the "atlas.server" field ("stage" or "production"), outputs results
used to push SBOMs to Atlas. Also outputs results used to push SBOMs to an S3
bucket. If no Atlas fields are present in the data file, it outputs empty
strings as results, indicating that the Atlas push should be skipped.

## Parameters
| Name                    | Description                                                                                                                | Optional    | Default value           |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------|-------------|-------------------------|
| dataPath                | Path to the merged data JSON file generated by collect-data task and containing the Atlas configuration option             | No          | -                       |
| ociStorage              | The OCI repository where the Trusted Artifacts are stored                                                                  | Yes         | empty                   |
| ociArtifactExpiresAfter | Expiration date for the trusted artifacts created in the OCI repository. An empty string means the artifacts do not expire | Yes         | 1d                      |
| trustedArtifactsDebug   | Flag to enable debug logging in trusted artifacts. Set to a non-empty string to enable                                     | Yes         | ""                      |
| orasOptions             | oras options to pass to Trusted Artifacts calls                                                                            | Yes         | ""                      | 
| sourceDataArtifact      | Location of trusted artifacts to be used to populate data directory                                                        | Yes         | ""                      |
| dataDir                 | The location where data will be stored                                                                                     | Yes         | $(workspaces.data.path) |
| taskGitUrl              | The url to the git repo where the release-service-catalog tasks and stepactions to be used are stored                      | No          | ""                      |
| taskGitRevision         | The revision in the taskGitUrl repo to be used                                                                             | No          | ""                      |

## Changes in 1.2.1
* Deprecate the Atlas v1 API in favor of v2.
* A result `bombasticApiUrl` was renamed to `atlasApiUrl`.

## Changes in 1.2.0
* Added compute resource limits

## Changes in 1.1.0
* now supports specifying secret names for stage and prod.

## Changes in 1.0.1
* Also collect SBOM retry S3 bucket data.

## Changes in 1.0.0
* This task now supports Trusted artifacts
